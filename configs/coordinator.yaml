# Coordinator Configuration
# The coordinator manages task distribution and worker health monitoring

coordinator:
  # Unique identifier for this coordinator node
  id: "coordinator-1"
  
  # gRPC server port for worker connections
  grpc_port: 9090
  
  # HTTP API port for health checks and metrics
  http_port: 8090
  
  # How often to poll database for pending tasks
  poll_interval: 2s
  
  # Time to wait before marking worker as suspect (no heartbeat)
  heartbeat_timeout: 30s
  
  # Time to wait before reassigning in-progress tasks
  stale_task_timeout: 5m
  
  # How often to cleanup dead workers
  cleanup_interval: 1m

database:
  host: "zkp-postgres"      # Docker service name, use "localhost" for local dev
  port: 5432
  database: "zkp_network"
  user: "postgres"
  password: "postgres"
  ssl_mode: "disable"
  max_open_conns: 25
  max_idle_conns: 5
  conn_max_lifetime: 5m

redis:
  host: "redis"             # Docker service name, use "localhost" for local dev
  port: 6379
  password: ""              # Leave empty if no auth
  db: 0                     # Redis database number (0-15)
  
  # Connection pool settings
  max_retries: 3            # Max retry attempts for failed operations
  pool_size: 10             # Max number of socket connections
  min_idle_conns: 5         # Minimum idle connections to maintain
  
  # Timeout settings
  dial_timeout: 5s          # Timeout for establishing connection
  read_timeout: 3s          # Timeout for socket reads
  write_timeout: 3s         # Timeout for socket writes
  pool_timeout: 4s          # Timeout when all connections are busy
  
  # Feature flags
  enabled: true             # Enable Redis event bus (set false to use polling only)
  caching_enabled: false    # Enable caching features (future use)
  
  # Caching configuration (for future use)
  default_ttl: 5m           # Default cache expiration time

logging:
  level: "info"         # debug, info, warn, error
  format: "json"        # json or console
  output: "stdout"

metrics:
  enabled: true
  port: 9091           # Prometheus metrics port
  path: "/metrics"
